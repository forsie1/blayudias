<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<title>Дія</title>

<style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{margin:0;height:100%;font-family:-apple-system;color:#fff}
body{
  background:linear-gradient(160deg,#6a5cff,#2b3cff,#ff5fb7);
  overflow:hidden;
}

/* ===== SCREENS ===== */
.screen{
  position:absolute; inset:0;
  display:flex; flex-direction:column;
  justify-content:center; align-items:center;
}
.hidden{display:none}

/* ===== PIN ===== */
.pin-dots{display:flex;gap:12px;margin-bottom:20px}
.pin-dots div{width:14px;height:14px;border:2px solid #fff;border-radius:50%}
.pin-dots .on{background:#fff}

.pad{display:grid;grid-template-columns:repeat(3,80px);gap:12px}
.pad button{
  height:70px;border:none;border-radius:18px;
  background:rgba(255,255,255,.25);
  color:#fff;font-size:26px;font-weight:800;
}

/* ===== FORM ===== */
.form{
  width:90%;max-width:360px;
  background:rgba(255,255,255,.15);
  backdrop-filter:blur(20px);
  border-radius:24px;
  padding:20px;
  display:flex;flex-direction:column;gap:12px;
}
.form input{
  padding:12px 14px;
  border-radius:14px;
  border:none;
  background:rgba(255,255,255,.25);
  color:#fff;font-size:15px;
}
.form button{
  margin-top:10px;
  padding:14px;border:none;border-radius:18px;
  background:#5b6cff;color:#fff;font-weight:800;
}

/* ===== CARD ===== */
.card-wrap{perspective:1400px}
.card{
  width:360px;height:460px;
  position:relative;
  transform-style:preserve-3d;
  transition:.8s cubic-bezier(.2,.8,.2,1);
}
.card.flip{transform:rotateY(180deg)}

.side{
  position:absolute; inset:0;
  border-radius:26px;
  backface-visibility:hidden;
  overflow:hidden;
}
.blur-bg{
  position:absolute; inset:0;
  backdrop-filter:blur(20px);
  background:rgba(255,255,255,.18);
}
.front-content{
  position:relative;z-index:2;
  padding:18px;
}

.top{display:flex;gap:14px;margin-top:14px}
.photo{
  width:110px;height:140px;
  background:rgba(255,255,255,.35);
  border-radius:14px;
}
.right{font-size:14px;display:flex;flex-direction:column;gap:6px}

.name{margin-top:14px;font-weight:800}
.update{
  margin-top:12px;
  padding:8px;
  background:rgba(0,255,0,.35);
  border-radius:10px;text-align:center;
}

.back{
  transform:rotateY(180deg);
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
}
.back h3{margin-bottom:10px}
</style>
</head>

<body>

<!-- PIN -->
<div id="pin" class="screen">
  <div class="pin-dots">
    <div></div><div></div><div></div><div></div>
  </div>
  <div class="pad">
    <button onclick="add(1)">1</button><button onclick="add(2)">2</button><button onclick="add(3)">3</button>
    <button onclick="add(4)">4</button><button onclick="add(5)">5</button><button onclick="add(6)">6</button>
    <button onclick="add(7)">7</button><button onclick="add(8)">8</button><button onclick="add(9)">9</button>
    <button onclick="del()">⌫</button><button onclick="add(0)">0</button><button></button>
  </div>
</div>

<!-- FORM -->
<div id="formScreen" class="screen hidden">
  <div class="form">
    <input id="name" placeholder="Імʼя">
    <input id="surname" placeholder="Прізвище">
    <input id="patronymic" placeholder="По-батькові">
    <input id="birth" placeholder="Дата народження">
    <button onclick="createDoc()">Створити документ</button>
  </div>
</div>

<!-- CARD -->
<div id="cardScreen" class="screen hidden">
  <div class="card-wrap">
    <div id="card" class="card" onclick="flip()">
      <div class="side">
        <div class="blur-bg"></div>
        <div class="front-content">
          <div class="top">
            <div class="photo"></div>
            <div class="right">
              <div id="birthOut"></div>
              <div>№ 07460112</div>
              <div>Підпис</div>
            </div>
          </div>
          <div class="update">Документ оновлено</div>
          <div class="name" id="nameOut"></div>
        </div>
      </div>
      <div class="side back">
        <h3>QR-код</h3>
        <canvas id="qr"></canvas>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
let pin=[],dots=document.querySelectorAll('.pin-dots div');
function draw(){dots.forEach((d,i)=>d.classList.toggle('on',i<pin.length))}
function add(n){if(pin.length<4){pin.push(n);draw();if(pin.join('')==='1111'){unlock()}}}
function del(){pin.pop();draw()}
function unlock(){
  pin=[];draw();
  pinScreen.classList.add('hidden');
  formScreen.classList.remove('hidden');
}

function createDoc(){
  nameOut.textContent =
    surname.value+" "+name.value+" "+patronymic.value;
  birthOut.textContent=birth.value;
  formScreen.classList.add('hidden');
  cardScreen.classList.remove('hidden');
  QRCode.toCanvas(qr,'https://example.com',{width:200});
}

function flip(){
  card.classList.toggle('flip');
}
</script>

</body>
</html>
