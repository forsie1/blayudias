<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>D1A DEMO</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,sans-serif}
html,body{height:100%;overflow:hidden}
body{
  background:linear-gradient(-45deg,#ffd54f,#4fc3f7,#7e57c2,#ec407a);
  background-size:400% 400%;
  animation:bg 18s ease infinite;
}
@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
.hidden{display:none}

/* ===== APP ===== */
#app{position:fixed;inset:0;display:flex;flex-direction:column}
#screens{flex:1;overflow:hidden;position:relative}

/* ===== PIN ===== */
#pin{
  position:absolute;inset:0;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  backdrop-filter:blur(30px);
  z-index:10;
}
.pin-dots{display:flex;gap:14px;margin:20px}
.pin-dot{
  width:14px;height:14px;border-radius:50%;
  border:2px solid #fff;
}
.pin-dot.filled{background:#fff}
.pin-pad{
  display:grid;
  grid-template-columns:repeat(3,80px);
  gap:14px;
}
.pin-btn{
  width:80px;height:80px;border-radius:50%;
  background:rgba(255,255,255,.15);
  color:#fff;font-size:26px;
  display:flex;align-items:center;justify-content:center;
}
.pin-btn:active{transform:scale(.95)}

/* ===== TABBAR ===== */
#tabbar{
  height:74px;
  background:#000;
  display:flex;
  justify-content:space-around;
  align-items:center;
  color:#fff;
}
.tab{display:flex;flex-direction:column;align-items:center;font-size:12px}
.tab.active{opacity:1}
.tab{opacity:.6}

/* ===== SCREENS ===== */
.screen{position:absolute;inset:0;overflow-y:auto;padding:16px;color:#fff}
.title{font-size:22px;font-weight:700;margin-bottom:12px}

/* ===== FORM ===== */
.form input{
  width:100%;
  padding:14px;
  margin-bottom:10px;
  border-radius:14px;
  border:none;
  background:rgba(255,255,255,.15);
  color:#fff;
  font-size:16px;
}
.form button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  background:#fff;
  color:#000;
  font-weight:700;
}

/* ===== SIGN ===== */
#sign{background:#fff;border-radius:12px;width:100%;height:120px}

/* ===== CARD ===== */
.card-wrap{display:flex;justify-content:center;margin-top:20px}
.card{
  width:340px;
  border-radius:24px;
  position:relative;
  transform-style:preserve-3d;
  transition:transform .6s;
}
.card.flipped{transform:rotateY(180deg)}
.face{
  position:absolute;inset:0;
  backface-visibility:hidden;
  border-radius:24px;
  padding:16px;
}
.front{
  background:rgba(255,255,255,.15);
  backdrop-filter:blur(20px);
}
.back{
  background:#fff;
  transform:rotateY(180deg);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
}
.card-header{text-align:center;font-weight:700;margin-bottom:10px}
.card-main{display:flex;gap:12px}
.photo{
  width:90px;height:120px;
  border-radius:12px;
  background:#ccc;
  overflow:hidden;
}
.photo img{width:100%;height:100%;object-fit:cover}
.info{font-size:13px}
.info b{font-size:14px}
.sign-img{width:120px;margin-top:6px}
.marquee{
  margin:10px 0;
  overflow:hidden;
  white-space:nowrap;
}
.marquee span{
  display:inline-block;
  animation:run 10s linear infinite;
  color:#8aff8a;
}
@keyframes run{
  from{transform:translateX(100%)}
  to{transform:translateX(-100%)}
}
.fio{
  font-weight:800;
  font-size:18px;
}
.qr-title{margin-bottom:10px;font-weight:700}
</style>
</head>

<body>
<div id="app">
  <div id="screens">

    <!-- PIN -->
    <div id="pin">
      <div class="pin-dots" id="dots"></div>
      <div class="pin-pad" id="pad"></div>
    </div>

    <!-- DOCUMENTS -->
    <div class="screen" id="documents">
      <div class="title">Документи</div>

      <div class="form">
        <input placeholder="Прізвище" id="ln">
        <input placeholder="Імʼя" id="fn">
        <input placeholder="По батькові" id="mn">
        <input placeholder="Дата народження" id="bd">
        <input type="file" accept="image/*" id="photoInput">
        <canvas id="sign"></canvas>
        <button onclick="createDoc()">Створити документ</button>
      </div>

      <div class="card-wrap hidden" id="cardWrap">
        <div class="card" id="card" onclick="flip()">
          <div class="face front">
            <div class="card-header">Паспорт громадянина України</div>
            <div class="card-main">
              <div class="photo"><img id="photo"></div>
              <div class="info">
                <b>Дата народження</b><br><span id="bdOut"></span><br><br>
                <b>Номер</b><br>07460112<br>
                <img class="sign-img" id="signOut">
              </div>
            </div>
            <div class="marquee"><span>Документ оновлено · сьогодні · Документ дійсний</span></div>
            <div class="fio" id="fio"></div>
          </div>
          <div class="face back">
            <div class="qr-title">QR-код</div>
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=demo">
          </div>
        </div>
      </div>

    </div>

  </div>

  <!-- TABBAR -->
  <div id="tabbar" class="hidden">
    <div class="tab active">Стрічка</div>
    <div class="tab">Документи</div>
    <div class="tab">Сервіси</div>
    <div class="tab">Меню</div>
  </div>
</div>

<script>
/* PIN */
const PIN="1111";let pin="";
const dots=document.getElementById("dots");
for(let i=0;i<4;i++){dots.innerHTML+=`<div class="pin-dot"></div>`}
const pad=document.getElementById("pad");
[1,2,3,4,5,6,7,8,9,"⌫",0].forEach(v=>{
  const b=document.createElement("div");
  b.className="pin-btn";
  b.textContent=v;
  b.onclick=()=>{
    if(v==="⌫"){pin=pin.slice(0,-1)}
    else if(pin.length<4){pin+=v}
    updatePin();
  };
  pad.appendChild(b);
});
function updatePin(){
  [...dots.children].forEach((d,i)=>d.classList.toggle("filled",i<pin.length));
  if(pin.length===4){
    if(pin===PIN){
      document.getElementById("pin").classList.add("hidden");
      document.getElementById("tabbar").classList.remove("hidden");
    }else{pin="";updatePin()}
  }
}

/* SIGN */
const c=document.getElementById("sign");
const ctx=c.getContext("2d");
c.width=c.offsetWidth;c.height=c.offsetHeight;
let draw=false;
c.onpointerdown=e=>{draw=true;ctx.moveTo(e.offsetX,e.offsetY)}
c.onpointermove=e=>{if(draw){ctx.lineTo(e.offsetX,e.offsetY);ctx.stroke()}}
c.onpointerup=()=>draw=false;

/* PHOTO */
document.getElementById("photoInput").onchange=e=>{
  const r=new FileReader();
  r.onload=()=>document.getElementById("photo").src=r.result;
  r.readAsDataURL(e.target.files[0]);
}

/* DOC */
function createDoc(){
  document.getElementById("fio").innerText=
    ln.value+"\n"+fn.value+"\n"+mn.value;
  document.getElementById("bdOut").innerText=bd.value;
  document.getElementById("signOut").src=c.toDataURL();
  document.getElementById("cardWrap").classList.remove("hidden");
}
function flip(){document.getElementById("card").classList.toggle("flipped")}
</script>
</body>
</html>
