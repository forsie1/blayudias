<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>–î—ñ—è</title>

<style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{margin:0;height:100%;font-family:-apple-system,BlinkMacSystemFont}
body{
  background:linear-gradient(160deg,#5b4bff,#2f3cff,#ff5bbd);
  color:#fff;overflow:hidden;
}
.hidden{display:none}

/* ===== PIN ===== */
#pin{
  position:fixed;inset:0;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  gap:24px;
}
.dots{display:flex;gap:14px}
.dots span{
  width:14px;height:14px;
  border:2px solid #fff;border-radius:50%;
}
.dots .on{background:#fff}
.pad{display:grid;grid-template-columns:repeat(3,80px);gap:14px}
.pad button{
  height:70px;border:none;border-radius:18px;
  background:rgba(255,255,255,.25);
  color:#fff;font-size:26px;font-weight:900;
}
.erase{background:rgba(255,80,80,.35)!important}

/* ===== APP SCREENS ===== */
.screen{
  position:absolute;inset:0;
  padding:20px 16px 90px;
  overflow-y:auto;
}

/* ===== TABBAR ===== */
#tabbar{
  position:fixed;left:0;right:0;bottom:0;
  height:80px;
  background:#000;
  display:flex;
}
#tabbar.hidden{display:none}
#tabbar button{
  flex:1;border:none;background:none;
  color:#fff;font-weight:800;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  gap:4px;font-size:12px;
}

/* ===== DOCUMENT LIST ===== */
.tile{
  background:rgba(255,255,255,.18);
  backdrop-filter:blur(20px);
  border-radius:20px;
  padding:16px;
  font-weight:900;
  margin-bottom:12px;
}

/* ===== FORM ===== */
.form{
  background:rgba(255,255,255,.18);
  backdrop-filter:blur(25px);
  border-radius:26px;
  padding:20px;
  max-width:380px;
  margin:0 auto;
  display:flex;flex-direction:column;gap:12px;
}
.form h2{margin:0 0 6px;font-weight:900}
.form label{font-size:13px;font-weight:700;opacity:.85}
.form input{
  padding:14px 16px;border-radius:16px;border:none;
  background:rgba(255,255,255,.25);
  color:#fff;font-weight:800;
}
.form button{
  margin-top:8px;padding:16px;border:none;
  border-radius:18px;
  background:#4f5cff;color:#fff;
  font-weight:900;
}

/* ===== SIGNATURE ===== */
#sign{
  background:rgba(255,255,255,.25);
  border-radius:14px;
}

/* ===== CARD ===== */
.card-wrap{display:flex;justify-content:center;margin-top:24px}
.card{
  width:360px;height:480px;
  position:relative;
  transform-style:preserve-3d;
  transition:.8s cubic-bezier(.2,.8,.2,1);
}
.card.flip{transform:rotateY(180deg)}

.side{
  position:absolute;inset:0;
  border-radius:28px;
  backface-visibility:hidden;
  -webkit-backface-visibility:hidden;
  overflow:hidden;
}

/* front */
.front{transform:rotateY(0deg)}
.front .blur{
  position:absolute;inset:0;
  backdrop-filter:blur(22px);
  background:rgba(255,255,255,.18);
}
.front .content{
  position:relative;z-index:1;
  padding:18px;font-weight:900;
}

/* back */
.back{
  transform:rotateY(180deg);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:rgba(0,0,0,.2);
}

.logo{font-size:22px}
.top{display:flex;gap:14px;margin-top:14px}
.photo{
  width:110px;height:140px;
  border-radius:14px;
  background:rgba(255,255,255,.35);
  overflow:hidden;
}
.photo img{width:100%;height:100%;object-fit:cover}

.info{
  display:flex;flex-direction:column;
  gap:6px;font-size:14px;
}

/* marquee */
.marquee{
  margin-top:14px;
  background:rgba(0,255,120,.35);
  border-radius:10px;
  overflow:hidden;
}
.marquee div{
  white-space:nowrap;
  padding:8px 10px;
  animation:run 8s linear infinite;
}
@keyframes run{
  from{transform:translateX(100%)}
  to{transform:translateX(-100%)}
}

.name{margin-top:12px;font-size:16px}

.watermark{
  position:absolute;
  bottom:10px;right:14px;
  font-size:10px;opacity:.5;
}

.qr-title{
  font-weight:900;
  margin-bottom:12px;
}
</style>
</head>

<body>

<!-- PIN -->
<div id="pin">
  <div class="dots">
    <span></span><span></span><span></span><span></span>
  </div>
  <div class="pad">
    <button onclick="add(1)">1</button>
    <button onclick="add(2)">2</button>
    <button onclick="add(3)">3</button>
    <button onclick="add(4)">4</button>
    <button onclick="add(5)">5</button>
    <button onclick="add(6)">6</button>
    <button onclick="add(7)">7</button>
    <button onclick="add(8)">8</button>
    <button onclick="add(9)">9</button>
    <button class="erase" onclick="del()">‚å´</button>
    <button onclick="add(0)">0</button>
    <button></button>
  </div>
</div>

<!-- DOCUMENTS -->
<div id="documents" class="screen hidden">
  <div class="tile" onclick="show('create')">‚ûï –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç</div>
  <div id="passportTile" class="tile hidden" onclick="show('docView')">
    –ü–∞—Å–ø–æ—Ä—Ç –≥—Ä–æ–º–∞–¥—è–Ω–∏–Ω–∞ –£–∫—Ä–∞—ó–Ω–∏ ¬∑ DEMO
  </div>
</div>

<!-- CREATE -->
<div id="create" class="screen hidden">
  <div class="form">
    <h2>–î—ñ—è</h2>

    <label>–ü—Ä—ñ–∑–≤–∏—â–µ</label>
    <input id="surname">

    <label>–Ü–º º—è</label>
    <input id="name">

    <label>–ü–æ-–±–∞—Ç—å–∫–æ–≤—ñ</label>
    <input id="patro">

    <label>–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</label>
    <input id="birth">

    <label>–§–æ—Ç–æ</label>
    <input type="file" accept="image/*" onchange="loadPhoto(event)">

    <label>–ü—ñ–¥–ø–∏—Å</label>
    <canvas id="sign" width="300" height="120"></canvas>

    <button onclick="save()">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
  </div>
</div>

<!-- DOCUMENT VIEW -->
<div id="docView" class="screen hidden">
  <div class="card-wrap">
    <div id="card" class="card" onclick="flip()">

      <!-- FRONT -->
      <div class="side front">
        <div class="blur"></div>
        <div class="content">
          <div class="logo">DA1 ¬∑ DEMO</div>

          <div class="top">
            <div class="photo">
              <img id="photoImg">
            </div>
            <div class="info">
              <div id="outBirth"></div>
              <div>‚Ññ 07460112</div>
              <div>–ü—ñ–¥–ø–∏—Å</div>
            </div>
          </div>

          <div class="marquee">
            <div id="update"></div>
          </div>

          <div class="name" id="outName"></div>
          <div class="watermark">WATERMARK ¬∑ DEMO</div>
        </div>
      </div>

      <!-- BACK -->
      <div class="side back">
        <div class="qr-title">QR-–∫–æ–¥</div>
        <canvas id="qr" width="200" height="200"></canvas>
      </div>

    </div>
  </div>
</div>

<!-- TABBAR -->
<div id="tabbar" class="hidden">
  <button onclick="show('documents')">üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∏</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
/* ===== PIN ===== */
let pin=[], dots=document.querySelectorAll('.dots span');
function drawDots(){
  dots.forEach((d,i)=>d.classList.toggle('on',i<pin.length));
}
function add(n){
  if(pin.length>=4) return;
  pin.push(n); drawDots();
  if(pin.length===4){
    setTimeout(()=>{
      if(pin.join('')==='1111') unlock();
      else{ pin=[]; drawDots(); }
    },150);
  }
}
function del(){ pin.pop(); drawDots(); }
function unlock(){
  document.getElementById('pin').style.display='none';
  document.getElementById('tabbar').classList.remove('hidden');
  show('documents');
}

/* ===== NAV ===== */
function show(id){
  ['documents','create','docView'].forEach(s=>{
    document.getElementById(s).classList.add('hidden');
  });
  document.getElementById(id).classList.remove('hidden');
}

/* ===== PHOTO ===== */
function loadPhoto(e){
  const r=new FileReader();
  r.onload=()=>document.getElementById('photoImg').src=r.result;
  r.readAsDataURL(e.target.files[0]);
}

/* ===== SIGN ===== */
const sign=document.getElementById('sign');
const ctx=sign.getContext('2d');
let drawing=false;
sign.onpointerdown=e=>{
  drawing=true;
  ctx.beginPath();
  ctx.moveTo(e.offsetX,e.offsetY);
};
sign.onpointermove=e=>{
  if(!drawing) return;
  ctx.lineTo(e.offsetX,e.offsetY);
  ctx.stroke();
};
sign.onpointerup=()=>drawing=false;

/* ===== SAVE ===== */
function save(){
  const s=document.getElementById('surname').value;
  const n=document.getElementById('name').value;
  const p=document.getElementById('patro').value;
  const b=document.getElementById('birth').value;

  document.getElementById('outName').textContent = `${s} ${n} ${p}`;
  document.getElementById('outBirth').textContent = b;
  document.getElementById('update').textContent =
    `–î–æ–∫—É–º–µ–Ω—Ç –æ–Ω–æ–≤–ª–µ–Ω–æ ${new Date().toLocaleDateString('uk-UA')}`;

  QRCode.toCanvas(
    document.getElementById('qr'),
    'https://example.com/error',
    {width:200}
  );

  document.getElementById('passportTile').classList.remove('hidden');
  show('documents');
}

/* ===== FLIP ===== */
function flip(){
  document.getElementById('card').classList.toggle('flip');
}
</script>

</body>
</html>
